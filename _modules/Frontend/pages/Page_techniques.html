

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frontend.pages.Page_techniques &mdash; KIT_BIG_DATA_MS2025 v1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=5cb08e4e"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            KIT_BIG_DATA_MS2025
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Présentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">KIT_BIG_DATA_MS 2025</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../API_doc.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../API_doc.html#backend">Backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#script-pour-les-pages">Script pour les pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#module-src.technique">technique</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#module-src.processing_data">processing_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#cursor">cursor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#utils">utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#module-utils.file_manager">file_manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#module-utils.data_processor">data_processor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../API_doc.html#frontend">Frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#module-Frontend.Accueil">Accueil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#id1">cursor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#module-Frontend.pages.Page_techniques">techniques</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#Frontend.pages.Page_techniques.RecipeRecommender"><code class="docutils literal notranslate"><span class="pre">RecipeRecommender</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#Frontend.pages.Page_techniques.SeasonCorrelationAnalyzer"><code class="docutils literal notranslate"><span class="pre">SeasonCorrelationAnalyzer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../API_doc.html#Frontend.pages.Page_techniques.TechniquePage"><code class="docutils literal notranslate"><span class="pre">TechniquePage</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../API_doc.html#module-Frontend.pages.Page_fun_facts">fun_facts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../py-modindex.html">Module Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">KIT_BIG_DATA_MS2025</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">Frontend.pages.Page_techniques</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for Frontend.pages.Page_techniques</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">os</span> 

<span class="n">st</span><span class="o">.</span><span class="n">set_page_config</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="s2">&quot;wide&quot;</span><span class="p">)</span>
<span class="c1"># Ajouter le répertoire racine au chemin de recherche des modules</span>

<span class="kn">from</span> <span class="nn">utils.file_manager</span> <span class="kn">import</span> <span class="n">DataHandler</span>

<div class="viewcode-block" id="SeasonCorrelationAnalyzer">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.SeasonCorrelationAnalyzer">[docs]</a>
<span class="k">class</span> <span class="nc">SeasonCorrelationAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for analyzing season correlations.&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">season_correlations</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span> <span class="o">=</span> <span class="n">season_correlations</span>

<div class="viewcode-block" id="SeasonCorrelationAnalyzer.get_season_for_technique">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.SeasonCorrelationAnalyzer.get_season_for_technique">[docs]</a>
    <span class="k">def</span> <span class="nf">get_season_for_technique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">technique</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Give the season correlated to the class with the value.</span>
<span class="sd">        If the difference for the maximum value and the minimum value for the technique are less than the given threshold (0.01 by default), we decide to say that the technique has no specific season.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        technique (str): The technique to analyze.</span>
<span class="sd">        threshold (float): The threshold to determine if a technique has a specific season.</span>

<span class="sd">        Returns:</span>
<span class="sd">        Tuple[Optional[str], Optional[float]]: The season and the correlation value, or (None, None) if no specific season is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">technique</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">max_corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">technique</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">min_corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">technique</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">max_corr</span> <span class="o">-</span> <span class="n">min_corr</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;No specific season&quot;</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">season</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">technique</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">season</span><span class="p">,</span> <span class="n">max_corr</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="SeasonCorrelationAnalyzer.plot_heatmap">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.SeasonCorrelationAnalyzer.plot_heatmap">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_heatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot an interactive heatmap of the season correlations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">Heatmap</span><span class="p">(</span>
                <span class="n">z</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">values</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">index</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">colorscale</span><span class="o">=</span><span class="s2">&quot;Balance&quot;</span><span class="p">,</span>
                <span class="n">colorbar</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Corrélation&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">row</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.025</span> <span class="k">else</span> <span class="s2">&quot;white&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
        <span class="p">]</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
            <span class="n">autosize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
            <span class="n">coloraxis_colorbar</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Corrélation&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span></div>
</div>



<div class="viewcode-block" id="RecipeRecommender">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.RecipeRecommender">[docs]</a>
<span class="k">class</span> <span class="nc">RecipeRecommender</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for recommending recipes&quot;&quot;&quot;</span>
    
<div class="viewcode-block" id="RecipeRecommender.get_top_recipes_by_season">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.RecipeRecommender.get_top_recipes_by_season">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_top_recipes_by_season</span><span class="p">(</span><span class="n">techniques</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">technique</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">season</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">top_n</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the TOP 10 recipes for the selected season for this technique by weighted rating</span>
<span class="sd">        Parameters:</span>
<span class="sd">        techniques (pd.DataFrame): The DataFrame containing the techniques and recipes data.</span>
<span class="sd">        technique (str): The technique to filter recipes by.</span>
<span class="sd">        season (str): The season to filter recipes by.</span>
<span class="sd">        top_n (int): The number of top recipes to return. Default is 10.</span>

<span class="sd">        Returns:</span>
<span class="sd">        pd.DataFrame: A DataFrame containing the top recipes for the selected season and technique.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recipes_with_technique</span> <span class="o">=</span> <span class="n">techniques</span><span class="p">[</span><span class="n">techniques</span><span class="p">[</span><span class="s1">&#39;techniques&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">technique</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span>
        <span class="n">clean_recipe</span> <span class="o">=</span> <span class="n">recipes_with_technique</span><span class="p">[[</span><span class="s1">&#39;recipe_id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;techniques&#39;</span><span class="p">,</span><span class="s1">&#39;season&#39;</span><span class="p">,</span> <span class="s1">&#39;weighted_rating&#39;</span><span class="p">]]</span>
        <span class="n">recipes_in_season</span> <span class="o">=</span> <span class="n">clean_recipe</span><span class="p">[</span><span class="n">clean_recipe</span><span class="p">[</span><span class="s1">&#39;season&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">season</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">recipes_in_season</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;weighted_rating&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">top_n</span><span class="p">)[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;techniques&#39;</span><span class="p">,</span> <span class="s1">&#39;weighted_rating&#39;</span><span class="p">]]</span></div>
</div>



<div class="viewcode-block" id="TechniquePage">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.TechniquePage">[docs]</a>
<span class="k">class</span> <span class="nc">TechniquePage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main application class for Technique</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techniques</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="TechniquePage.load_datas">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.TechniquePage.load_datas">[docs]</a>
    <span class="k">def</span> <span class="nf">load_datas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load all the needed pickle for the technique page (season_correlations &amp; techniques)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data_loader</span> <span class="o">=</span> <span class="n">DataHandler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">load_pickle</span><span class="p">(</span><span class="s2">&quot;./data/preprocess/season_correlations.pkl&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techniques</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">load_pickle</span><span class="p">(</span><span class="s2">&quot;./data/preprocess/techniques.pkl&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">SeasonCorrelationAnalyzer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="p">)</span></div>


<div class="viewcode-block" id="TechniquePage.run">
<a class="viewcode-back" href="../../../API_doc.html#Frontend.pages.Page_techniques.TechniquePage.run">[docs]</a>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to run the Streamlit Technique Page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Analyse des Corrélations entre Techniques et Saisons&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_datas</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s2">&quot;Heatmap Interactive des Corrélations&quot;</span><span class="p">)</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">plot_heatmap</span><span class="p">()</span>
            <span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">use_container_width</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;selected_technique&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">selected_technique</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;### Sélectionnez une technique pour découvrir les corrélations&quot;</span><span class="p">)</span>
            <span class="n">techniques_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">season_correlations</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">technique</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">techniques_list</span><span class="p">):</span>
                <span class="k">with</span> <span class="n">cols</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="mi">8</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">technique</span><span class="p">):</span>
                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">selected_technique</span> <span class="o">=</span> <span class="n">technique</span>

            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">selected_technique</span><span class="p">:</span>
                <span class="n">selected_technique</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">selected_technique</span>
                <span class="n">season</span><span class="p">,</span> <span class="n">correlation_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">get_season_for_technique</span><span class="p">(</span><span class="n">selected_technique</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">correlation_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;La technique </span><span class="si">{</span><span class="n">selected_technique</span><span class="si">}</span><span class="s2"> n&#39;est pas caractéristique d&#39;une saison propre.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;La saison la plus corrélée avec la technique </span><span class="si">{</span><span class="n">selected_technique</span><span class="si">}</span><span class="s2"> est **</span><span class="si">{</span><span class="n">season</span><span class="si">}</span><span class="s2">** &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;avec une corrélation de </span><span class="si">{</span><span class="n">correlation_value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">divider</span><span class="p">()</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;### Choisissez une saison pour voir les recettes pour la technique </span><span class="si">{</span><span class="n">selected_technique</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
                    <span class="n">seasons_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Winter&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Fall&#39;</span><span class="p">]</span>
                    <span class="n">selected_season</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span><span class="s2">&quot;Saisons disponibles :&quot;</span><span class="p">,</span> <span class="n">seasons_list</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">selected_season</span><span class="p">:</span>
                        <span class="n">top_recipes</span> <span class="o">=</span> <span class="n">RecipeRecommender</span><span class="o">.</span><span class="n">get_top_recipes_by_season</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">techniques</span><span class="p">,</span> <span class="n">selected_technique</span><span class="p">,</span> <span class="n">selected_season</span>
                        <span class="p">)</span>
                        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;### Les 10 recettes les mieux notées pour </span><span class="si">{</span><span class="n">selected_season</span><span class="si">}</span><span class="s2"> sont :&quot;</span><span class="p">)</span>
                        <span class="n">st</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">top_recipes</span><span class="p">)</span></div>
</div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">TechniquePage</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Cecile LI, Josephine BERNARD, Dan HAYOUN.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>